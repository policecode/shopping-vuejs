import{i as w,r as L,s as M,G as B,_ as E,L as O,C as j,u as Y,E as T,e as $,o as l,c as h,b as o,F as b,B as V,l as g,t as f,f as S,H as q,n as C,I as z,d as U,w as y,v as D,p as N}from"./index.7802f190.js";const m=w([]),_=L({detail:"",loading:!0,isAddCart:!1,eventCart:!0}),G=M(()=>{let e="",t=-35;return m.value.forEach((n,s)=>{n.active&&(e=n.image_path,m.value.length>3?s+2<m.value.length?t=t*s:s+1<m.value.length?t=t*(s-1):s<m.value.length&&(t=t*(s-2)):t=0)}),t=t+"%",{imageSle:e,moveLeft:t}});function F(e,t){m.value.forEach((n,s)=>{t===s?n.active=!0:n.active=!1})}function R(e,t){let n=0;m.value.forEach((s,r)=>{s.active&&(n=r)}),t=="left"&&(n-1>=0?n=n-1:n=m.value.length-1),t=="right"&&(n+1<m.value.length?n=n+1:n=0),F(e,n)}const J=(e,t)=>{e.dispatch("addToCart",t),_.isAddCart=!0,_.eventCart=e.state.isAddCart,setTimeout(()=>{_.isAddCart=!1},2e3)};async function I(e){const t=B(e);return(await fetch(t)).json()}function Z(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}function K(e){const t=new Date,n=new Date(e);return t.getDate()==n.getDate()&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()?`${n.getHours()}:${n.getMinutes()}`:t.getFullYear()==n.getFullYear()?`dateFormat.getHours()}:${n.getMinutes()} - ${n.getDate()}/${n.getMonth()+1}`:`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}const Q={components:{Loading:O,AddCart:j},props:{},setup(){const e=Y(),n=T().params.id;return I(n).then(c=>{if(c.status=="success"){let a=c.imageProduct.map((p,u)=>u==0?{...p,active:!0}:{...p,active:!1});m.value=a,_.detail=c.product,_.loading=!1}}),{...{imageList:m,product:_,imageSelect:G,handleSelectImage:F,handleArrow:R,addtoCart:J},...{formatMoney:Z},store:e}}},W={class:"detail__container"},X={key:0,class:"detail__image"},x=["src"],ee={class:"detail__image-choose"},te={class:"detail__image-img"},ne=["src","onClick"],oe={class:"detail__image-icon"},se={class:"detail__information"},ae={class:"detail__information_name"},ie={class:"detail__information_price"},re=o("p",{class:"detail__information_title"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus ligula a scelerisque gravida. Nullam laoreet tortor ac maximus alique met, consectetur adipiscing elit. Vestibulum finibus ligula a scelerisque gravida. Nullam ",-1),le=["innerHTML"];function me(e,t,n,s,r,c){const a=$("Loading"),p=$("AddCart");return l(),h(b,null,[o("div",W,[e.imageList?(l(),h("div",X,[o("img",{src:e.imageSelect.imageSle,alt:"",class:"detail__image-select"},null,8,x),o("div",ee,[o("div",te,[(l(!0),h(b,null,V(e.imageList,(u,P)=>(l(),h("img",{key:u.id,src:u.image_path,alt:"",style:q({left:e.imageSelect.moveLeft}),class:C({choose:u.active}),onClick:H=>e.handleSelectImage(H,P)},null,14,ne))),128))]),o("div",oe,[o("i",{class:"fas fa-chevron-left",onClick:t[0]||(t[0]=u=>e.handleArrow(u,"left"))}),o("i",{class:"fas fa-chevron-right",onClick:t[1]||(t[1]=u=>e.handleArrow(u,"right"))})])])])):g("",!0),o("div",se,[o("h1",ae,f(e.product.detail.name),1),o("p",ie,"Gi\xE1: "+f(e.formatMoney(e.product.detail.price)),1),re,o("button",{class:"detail__information_cart",onClick:t[2]||(t[2]=u=>e.addtoCart(s.store,e.product.detail.id))},"Th\xEAm gi\u1ECF h\xE0ng")]),e.product.detail.content?(l(),h("div",{key:1,class:"detail__content",innerHTML:JSON.parse(e.product.detail.content)},null,8,le)):g("",!0)]),e.product.loading?(l(),S(a,{key:0})):g("",!0),e.product.isAddCart?(l(),S(p,{key:1,eventCart:e.product.eventCart},null,8,["eventCart"])):g("",!0)],64)}const ce=E(Q,[["render",me]]),k=w([]),i=L({name:"",email:"",comment:""}),d=L({name:"",email:"",comment:""});function A(e){return e=e.trim(),e.length<1}function v(e,t,n){return e=e.trim(),e.length<t?`D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c \xEDt h\u01A1n ${t} k\xFD t\u1EF1`:e.length>n?`D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c nhi\u1EC1u h\u01A1n ${n} k\xFD t\u1EF1`:!1}function ue(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function de(){let e=!1,t=!1,n=!1;return A(i.name)?(e=!0,d.name="D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"):v(i.name,5,50)&&(e=!0,d.name=v(i.name,5,50)),A(i.email)?(t=!0,d.email="D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"):ue(i.email)||(t=!0,d.email="Email nh\u1EADp v\xE0o kh\xF4ng \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng"),A(i.comment)?(n=!0,d.comment="D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng"):v(i.comment,5,500)&&(n=!0,d.comment=v(i.comment,5,50)),{isName:e,isEmail:t,isComment:n}}function fe(e,t){const{isName:n,isEmail:s,isComment:r}=de();n||(d.name=""),s||(d.email=""),r||(d.comment=""),!n&&!s&&!r&&pe({email:i.email.trim(),fullname:i.name.trim(),comment:i.comment.trim(),product_id:t,parent_id:0}).then(c=>{console.log(c),c.status==="success"&&(i.comment="",k.value=c.listComment.reverse())})}const he=M(()=>k.value.length);async function pe(e={}){return(await fetch(z,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)})).json()}const _e={setup(){const t=T().params.id;return I(t).then(r=>{r.status=="success"&&(k.value=r.listComment.reverse())}),{...{listComment:k,addCommnet:i,errors:d,countCommnet:he,onSubmit:fe},...{formatDate:K}}}},ge={class:"comment"},ve=o("hr",null,null,-1),Ce={class:"comment__list"},$e={class:"comment__list_count"},be=o("div",{class:"comment__information_image"},[o("img",{src:"https://i.pinimg.com/236x/16/b2/e2/16b2e2579118bf6fba3b56523583117f.jpg",alt:""})],-1),ke={class:"comment__information_title"},ye={class:"comment__information_content"},De={class:"comment__information_name"},Ae=o("hr",null,null,-1),Le={class:"comment__form"},Ee=o("h2",null,"\u0110\u0103ng b\xECnh lu\u1EADn",-1),Se=o("label",{for:""}," H\u1ECD t\xEAn ",-1),Ne=o("label",{for:""}," Email ",-1),we=o("label",{for:""},"Nh\u1EADp b\xECnh lu\u1EADn",-1),Me=o("div",{class:"form-group mt-4 d-flex justify-content-end"},[o("button",{type:"submit",class:"btn btn-dark float-right"},"B\xECnh lu\u1EADn")],-1);function Te(e,t,n,s,r,c){return l(),h("div",ge,[ve,o("div",Ce,[o("h4",$e,"C\xF3 "+f(e.countCommnet)+" b\xECnh lu\u1EADn",1),(l(!0),h(b,null,V(e.listComment,a=>(l(),h("div",{class:"comment__information",key:a.id},[be,o("div",ke,[o("div",ye,f(a.comment),1),o("h6",De,[o("span",null,f(a.fullname),1),o("span",null,"Th\u1EDDi gian \u0111\u0103ng: "+f(e.formatDate(a.created_at)),1)])])]))),128))]),Ae,o("div",Le,[o("form",{action:"",class:"row",onSubmit:t[3]||(t[3]=U(a=>e.onSubmit(a,e.$route.params.id),["prevent"]))},[Ee,o("div",{class:C(["form-group col-sm",{"comment-error":e.errors.name}])},[Se,y(o("input",{type:"text",class:"form-control",placeholder:"Nh\u1EADp t\xEAn c\u1EE7a b\u1EA1n","onUpdate:modelValue":t[0]||(t[0]=a=>e.addCommnet.name=a)},null,512),[[D,e.addCommnet.name]]),o("span",null,f(e.errors.name),1)],2),o("div",{class:C(["form-group col-sm",{"comment-error":e.errors.email}])},[Ne,y(o("input",{type:"text",class:"form-control",placeholder:"Nh\u1EADp \u0111\u1ECBa ch\u1EC9 email c\u1EE7a b\u1EA1n","onUpdate:modelValue":t[1]||(t[1]=a=>e.addCommnet.email=a)},null,512),[[D,e.addCommnet.email]]),o("span",null,f(e.errors.email),1)],2),o("div",{class:C(["form-group mt-4",{"comment-error":e.errors.comment}])},[we,y(o("textarea",{class:"form-control",rows:"3",placeholder:"H\xE3y b\xECnh lu\u1EADn v\u1EC1 s\u1EA3n ph\u1EA9m n\xE0y","onUpdate:modelValue":t[2]||(t[2]=a=>e.addCommnet.comment=a)},null,512),[[D,e.addCommnet.comment]]),o("span",null,f(e.errors.comment),1)],2),Me],32)])])}const Ve=E(_e,[["render",Te]]),Fe={components:{Detail:ce,Comment:Ve},props:{},setup(){}};function Ie(e,t,n,s,r,c){const a=$("Detail"),p=$("Comment");return l(),h(b,null,[N(a),N(p)],64)}const He=E(Fe,[["render",Ie]]);export{He as default};
