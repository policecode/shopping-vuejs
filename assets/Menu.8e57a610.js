import{r as S,i as P,s as B,x as D,y as E,D as F,_ as C,L as q,z as A,e as M,o as a,c as i,b as e,F as c,d as v,w as p,v as b,A as w,B as g,l as m,t as u,f as y,m as _,g as I,h as K,p as X}from"./index.7802f190.js";import{S as z}from"./submitSuccess.717af791.js";const o=S({name:"",link:"",parent:0,statusTable:"table",id:0}),h=P([]),V=B(()=>h.value.filter(function(t){return t.parent_id==0})),l=S({loading:!1,success:!1,msg:""});function j(){l.loading=!0,D({name:o.name,link:o.link,parent_id:o.parent}).then(t=>{t.status==="success"&&(l.loading=!1,l.success=!0,l.msg="Th\xEAm trang m\u1EDBi th\xE0nh c\xF4ng",setTimeout(()=>{l.success=!1},2e3),h.value=t.menu,o.name="",o.link="",o.parent=0),t.status==="errors"&&(l.loading=!1)}).catch(t=>console.log(t))}function G(t){return t.length>=20?t.slice(0,20)+"...":t}function J(t,n,f,d){o.id=t,o.name=f,o.parent=n,o.link=d,o.statusTable="update"}function T(){o.id=0,o.name="",o.parent=0,o.link="",o.statusTable="table"}function O(){l.loading=!0,E({id:o.id,name:o.name,parent_id:o.parent,link:o.link}).then(t=>{t.status=="success"&&(l.loading=!1,l.success=!0,l.msg="C\u1EADp nh\u1EADt menu th\xE0nh c\xF4ng",setTimeout(()=>{l.success=!1},2e3),h.value=t.menu,T())}).catch(t=>console.log(t))}function Q(t,n){confirm(`B\u1EA1n c\xF3 mu\u1ED1n x\xF3a menu ${t}`)&&(l.loading=!0,F({id:n}).then(d=>{d.status=="success"&&(l.loading=!1,l.success=!0,l.msg="X\xF3a menu th\xE0nh c\xF4ng",setTimeout(()=>{l.success=!1},2e3),h.value=d.menu)}).catch(d=>console.log(d)))}const R={components:{Loading:q,Success:z},setup(){return A().then(n=>{h.value=n.Menu}).catch(n=>console.log(n)),{...{formMenu:o,listMenuParent:V,listMenu:h,eventLoad:l,onSubmit:j,convertString:G,formUpdate:J,removeFormUpdate:T,updateSubmit:O,deleteMenu:Q}}}},W={class:"row g-4"},Y={class:"col-lg-12 col-md-12 wow fadeInUp"},Z=e("h3",null,"Th\xEAm Menu",-1),x={class:"row g-4"},ee={class:"col-lg-6 col-md-12"},te={class:"w-100"},se=_(" *T\xCAN MENU "),ne=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),oe={class:"col-lg-6 col-md-12"},le={class:"w-100"},ae=_(" *LINK "),ie=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),re={class:"col-lg-6 col-md-12"},ce={class:"w-100"},de=_(" *MENU CHA "),ue=e("option",{value:"0"},"-----Parent-----",-1),pe=["value"],me=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),he=e("li",{class:"col-lg-12 col-md-12"},[e("button",{type:"submit",class:"btn btn-primary rounded-pill py-2 px-4"}," Th\xEAm m\u1EDBi ")],-1),_e={class:"row g-4"},fe={class:"col-lg-6 col-md-12"},be={class:"w-100"},ge=_(" *T\xCAN MENU "),ke=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),Me={class:"col-lg-6 col-md-12"},ye={class:"w-100"},ve=_(" *LINK "),we=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),Se={class:"col-lg-6 col-md-12"},Ce={class:"w-100"},Te=_(" *MENU CHA "),Ue=e("option",{value:"0"},"-----Parent-----",-1),$e=["value"],Le=e("span",{style:{color:"red",display:"block"},class:"errors"},null,-1),Ne=e("li",{class:"col-lg-6 col-md-12"},null,-1),He=e("li",{class:"col-lg-6 col-md-6"},[e("button",{type:"submit",class:"btn btn-warning rounded-pill py-2 px-4"}," C\u1EADp nh\u1EADt ")],-1),Pe={class:"col-lg-6 col-md-6"},Be=e("h3",{class:"mt-4"},"DANH S\xC1CH MENU",-1),De={class:"table"},Ee=e("thead",null,[e("tr",null,[e("th",{scope:"col",width:"5%"},"STT"),e("th",{scope:"col",with:"70%"},"Menu"),e("th",{scope:"col",with:"10%"},"Link"),e("th",{scope:"col",with:"5%"},"S\u1EEDa"),e("th",{scope:"col",with:"5%"},"X\xF3a")])],-1),Fe={key:0},qe={scope:"row"},Ae=["onClick"],Ie=e("i",{class:"fas fa-pencil-alt"},null,-1),Ke=[Ie],Xe=["onClick"],ze=e("i",{class:"fas fa-trash-alt"},null,-1),Ve=[ze],je={key:0},Ge=e("th",{scope:"row"},null,-1),Je=["onClick"],Oe=e("i",{class:"fas fa-pencil-alt"},null,-1),Qe=[Oe],Re=["onClick"],We=e("i",{class:"fas fa-trash-alt"},null,-1),Ye=[We];function Ze(t,n,f,d,U,$){const k=M("Loading"),L=M("Success");return a(),i(c,null,[e("div",W,[e("div",Y,[t.formMenu.statusTable=="table"?(a(),i(c,{key:0},[Z,e("form",{id:"form-payment-product",onSubmit:n[3]||(n[3]=v((...s)=>t.onSubmit&&t.onSubmit(...s),["prevent"]))},[e("ul",x,[e("li",ee,[e("label",te,[se,p(e("input",{class:"form-control bg-transparent w-100",type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>t.formMenu.name=s),placeholder:"T\xEAn menus ...",required:""},null,512),[[b,t.formMenu.name]])]),ne]),e("li",oe,[e("label",le,[ae,p(e("input",{class:"form-control bg-transparent w-100",type:"text","onUpdate:modelValue":n[1]||(n[1]=s=>t.formMenu.link=s),placeholder:"Link...",required:""},null,512),[[b,t.formMenu.link]])]),ie]),e("li",re,[e("label",ce,[de,p(e("select",{"onUpdate:modelValue":n[2]||(n[2]=s=>t.formMenu.parent=s),class:"form-control bg-transparent w-100"},[ue,(a(!0),i(c,null,g(t.listMenuParent,s=>(a(),i("option",{key:s.id,value:s.id},u(s.name),9,pe))),128))],512),[[w,t.formMenu.parent]])]),me]),he])],32)],64)):m("",!0),t.formMenu.statusTable=="update"?(a(),i(c,{key:1},[e("h3",null,"C\u1EADp nh\u1EADt Menu: "+u(t.formMenu.name),1),e("form",{id:"form-payment-product",onSubmit:n[8]||(n[8]=v((...s)=>t.updateSubmit&&t.updateSubmit(...s),["prevent"]))},[e("ul",_e,[e("li",fe,[e("label",be,[ge,p(e("input",{class:"form-control bg-transparent w-100",type:"text","onUpdate:modelValue":n[4]||(n[4]=s=>t.formMenu.name=s),placeholder:"T\xEAn menus ...",required:""},null,512),[[b,t.formMenu.name]])]),ke]),e("li",Me,[e("label",ye,[ve,p(e("input",{class:"form-control bg-transparent w-100",type:"text","onUpdate:modelValue":n[5]||(n[5]=s=>t.formMenu.link=s),placeholder:"Link...",required:""},null,512),[[b,t.formMenu.link]])]),we]),e("li",Se,[e("label",Ce,[Te,p(e("select",{"onUpdate:modelValue":n[6]||(n[6]=s=>t.formMenu.parent=s),class:"form-control bg-transparent w-100"},[Ue,(a(!0),i(c,null,g(t.listMenuParent,s=>(a(),i("option",{key:s.id,value:s.id},u(s.name),9,$e))),128))],512),[[w,t.formMenu.parent]])]),Le]),Ne,He,e("li",Pe,[e("button",{onClick:n[7]||(n[7]=(...s)=>t.removeFormUpdate&&t.removeFormUpdate(...s)),type:"submit",class:"btn btn-danger rounded-pill py-2 px-4"}," H\u1EE7y b\u1ECF ")])])],32)],64)):m("",!0)])]),t.eventLoad.loading?(a(),y(k,{key:0})):m("",!0),t.eventLoad.success?(a(),y(L,{key:1,msg:t.eventLoad.msg},null,8,["msg"])):m("",!0),Be,e("table",De,[Ee,e("tbody",null,[(a(!0),i(c,null,g(t.listMenu,(s,N)=>(a(),i(c,{key:s.id},[s.parent_id==0?(a(),i("tr",Fe,[e("th",qe,u(N+1),1),e("td",null,u(s.name),1),e("td",null,u(t.convertString(s.link)),1),e("td",null,[e("button",{type:"button",class:"btn btn-warning",onClick:r=>t.formUpdate(s.id,s.parent_id,s.name,s.link)},Ke,8,Ae)]),e("td",null,[e("button",{onClick:r=>t.deleteMenu(s.name,s.id),type:"button",class:"btn btn-danger"},Ve,8,Xe)])])):m("",!0),(a(!0),i(c,null,g(t.listMenu,r=>(a(),i(c,{key:r.id},[r.parent_id==s.id?(a(),i("tr",je,[Ge,e("td",null,"----"+u(r.name),1),e("td",null,u(t.convertString(r.link)),1),e("td",null,[e("button",{type:"button",class:"btn btn-warning",onClick:H=>t.formUpdate(r.id,r.parent_id,r.name,r.link)},Qe,8,Je)]),e("td",null,[e("button",{onClick:H=>t.deleteMenu(r.name,r.id),type:"button",class:"btn btn-danger"},Ye,8,Re)])])):m("",!0)],64))),128))],64))),128))])])],64)}const xe=C(R,[["render",Ze]]),et={components:{Menu:xe},setup(){return{}}};function tt(t,n,f,d,U,$){const k=M("Menu",!0);return a(),y(K("dashboard-layout"),null,{default:I(()=>[X(k)]),_:1})}const ot=C(et,[["render",tt]]);export{ot as default};
