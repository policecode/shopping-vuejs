import{r as d,P as g,_ as m,u as _,a as b,o as a,c as u,b as e,n as w,t as v,w as p,v as c,d as y,e as L,f as k}from"./index.7802f190.js";const l=d({email:"",password:""}),r=d({status:!0,errorMsg:""});function B(s,t,i){r.status=!1,S({email:l.email,password:l.password}).then(o=>{if(o.status=="errorsLogin"){if(o.errors.email){r.errorMsg=o.errors.email[0],r.status=!0;return}if(o.errors.password){r.errorMsg=o.errors.password[0],r.status=!0;return}}o.status==401&&(r.errorMsg=o.title),o.status==200&&(t.dispatch("setTokenLogin",o.token),i.push({name:"dashboad"})),r.status=!0})}async function S(s={}){return(await fetch(g,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(s)})).json()}const $={setup(){const s=_(),t=b();return{...{formInput:l,statusBtn:r,onSubmit:B},store:s,router:t}}},M={class:"form-bg"},I=e("div",{class:"form-logo"},"Shopping",-1),P={class:"form-input"},T=e("i",{class:"fas fa-user"},null,-1),N={class:"form-input"},O=e("i",{class:"fas fa-lock"},null,-1),C={class:"form-input"},V=["disabled"],j={key:0},D={key:1,class:"loading-submit"};function U(s,t,i,o,f,h){return a(),u("div",M,[I,e("form",{action:"",class:"form-login",onSubmit:t[2]||(t[2]=y(n=>s.onSubmit(n,o.store,o.router),["prevent"]))},[e("div",{class:w(["error-msg",{hide:!s.statusBtn.errorMsg}])},v(s.statusBtn.errorMsg),3),e("div",P,[p(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>s.formInput.email=n),placeholder:"Nh\u1EADp \u0111\u1ECBa ch\u1EC9 email ..."},null,512),[[c,s.formInput.email]]),T]),e("div",N,[p(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=n=>s.formInput.password=n),placeholder:" m\u1EADt kh\u1EA9u ..."},null,512),[[c,s.formInput.password]]),O]),e("div",C,[e("button",{type:"submit",class:"from-submit",disabled:!s.statusBtn.status},[s.statusBtn.status?(a(),u("span",j,"\u0110\u0103ng nh\u1EADp")):(a(),u("span",D))],8,V)])],32)])}const z=m($,[["render",U]]),A={components:{Login:z},setup(){}};function E(s,t,i,o,f,h){const n=L("Login",!0);return a(),k(n)}const J=m(A,[["render",E]]);export{J as default};
